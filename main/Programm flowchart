<mxfile host="app.diagrams.net" modified="2023-11-15T12:00:00" agent="Mozilla/5.0" version="22.1.6" type="device">
  <diagram name="Page-1" id="Uxhl3M8vVX5XPKvRlB1S">
    <mxGraphModel dx="1200" dy="580" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- START -->
        <mxCell id="start" value="START" style="ellipse;whiteSpace=wrap;html=1;fillColor=#4D9900;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="350" y="20" width="80" height="40" as="geometry" />
        </mxCell>

        <!-- Initialize System -->
        <mxCell id="init" value="Initialize System:&#10;- Motors (setupMotors())&#10;- Compass/GPS/Bluetooth&#10;- Ultrasonic Sensors" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E6E6E6;" vertex="1" parent="1">
          <mxGeometry x="300" y="80" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="edge1" style="edgeStyle=none;curved=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="start" target="init">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Mode Check -->
        <mxCell id="modeCheck" value="Manual Mode?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFE6CC;" vertex="1" parent="1">
          <mxGeometry x="325" y="200" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="edge2" style="edgeStyle=none;endArrow=classic;endFill=1;" edge="1" parent="1" source="init" target="modeCheck">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Manual Mode Branch -->
        <mxCell id="manualMode" value="Wait for Bluetooth Command" style="parallelogram;whiteSpace=wrap;html=1;fillColor=#D5E8D4;" vertex="1" parent="1">
          <mxGeometry x="100" y="300" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge3" value="Yes" style="edgeStyle=none;endArrow=classic;endFill=1;" edge="1" parent="1" source="modeCheck" target="manualMode">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Autonomous Mode Branch -->
        <mxCell id="autoMode" value="Autonomous Mode" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#DAE8FC;" vertex="1" parent="1">
          <mxGeometry x="400" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge4" value="No" style="edgeStyle=none;endArrow=classic;endFill=1;" edge="1" parent="1" source="modeCheck" target="autoMode">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Update Sensors -->
        <mxCell id="updateSensors" value="Update Sensors:&#10;- GPS (updateGPS())&#10;- Compass (updateCompass())&#10;- Ultrasonic (update())" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E6E6E6;" vertex="1" parent="1">
          <mxGeometry x="350" y="380" width="200" height="90" as="geometry" />
        </mxCell>
        <mxCell id="edge5" style="edgeStyle=none;endArrow=classic;endFill=1;" edge="1" parent="1" source="autoMode" target="updateSensors">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Target Check -->
        <mxCell id="targetCheck" value="Target Set?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFE6CC;" vertex="1" parent="1">
          <mxGeometry x="350" y="490" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="edge6" style="edgeStyle=none;endArrow=classic;endFill=1;" edge="1" parent="1" source="updateSensors" target="targetCheck">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Wait for Coordinates -->
        <mxCell id="waitCoords" value="Wait for IoT Coordinates" style="parallelogram;whiteSpace=wrap;html=1;fillColor=#D5E8D4;" vertex="1" parent="1">
          <mxGeometry x="350" y="590" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge7" value="No" style="edgeStyle=none;endArrow=classic;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="targetCheck" target="waitCoords">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Navigate to Target -->
        <mxCell id="navigate" value="Navigate to Target:&#10;- Calculate Distance/Heading" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#DAE8FC;" vertex="1" parent="1">
          <mxGeometry x="350" y="670" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="edge8" value="Yes" style="edgeStyle=none;endArrow=classic;endFill=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="targetCheck" target="navigate">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Target Reached Check -->
        <mxCell id="targetReached" value="Target Reached?&#10;(≤ 1.5m)" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFE6CC;" vertex="1" parent="1">
          <mxGeometry x="350" y="770" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="edge9" style="edgeStyle=none;endArrow=classic;endFill=1;" edge="1" parent="1" source="navigate" target="targetReached">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Stop & Cut Grass -->
        <mxCell id="stopCut" value="Stop Motors → Cut Grass&#10;(RELAY_PIN)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#F8CECC;" vertex="1" parent="1">
          <mxGeometry x="350" y="870" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge10" value="Yes" style="edgeStyle=none;endArrow=classic;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="targetReached" target="stopCut">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Obstacle Check -->
        <mxCell id="obstacleCheck" value="Path Clear?&#10;(Ultrasonic Sensors)" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFE6CC;" vertex="1" parent="1">
          <mxGeometry x="350" y="950" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="edge11" value="No" style="edgeStyle=none;endArrow=classic;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="targetReached" target="obstacleCheck">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Avoid Obstacle -->
        <mxCell id="avoid" value="Avoid Obstacle&#10;(handleObstacleAvoidance())" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#F8CECC;" vertex="1" parent="1">
          <mxGeometry x="200" y="1050" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge12" value="No" style="edgeStyle=none;endArrow=classic;endFill=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="obstacleCheck" target="avoid">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- PID Control -->
        <mxCell id="pid" value="PID Control&#10;(pidController())" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#DAE8FC;" vertex="1" parent="1">
          <mxGeometry x="450" y="1050" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge13" value="Yes" style="edgeStyle=none;endArrow=classic;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="obstacleCheck" target="pid">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Loop Back -->
        <mxCell id="loop" value="" style="edgeStyle=none;endArrow=classic;endFill=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="pid" target="updateSensors">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="loop2" style="edgeStyle=none;endArrow=classic;endFill=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="avoid" target="updateSensors">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- END -->
        <mxCell id="end" value="END" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FF6666;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="350" y="1150" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="edge14" style="edgeStyle=none;endArrow=classic;endFill=1;" edge="1" parent="1" source="stopCut" target="end">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
